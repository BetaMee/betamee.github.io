{"componentChunkName":"component---src-templates-blog-template-tsx","path":"/content/WebFrontEnd-关于 Script 标签的加载知识/","result":{"data":{"site":{"siteMetadata":{"author":"橡树上","title":"十二棵橡树"}},"markdownRemark":{"id":"3c3af2fc-df05-5697-9752-b1973f80216e","html":"<h2 id=\"目录\" style=\"position:relative;\"><a href=\"#%E7%9B%AE%E5%BD%95\" aria-label=\"目录 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>目录</h2>\n<!-- toc -->\n<ul>\n<li><a href=\"#script-%E6%A0%87%E7%AD%BE%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B\">script 标签加载过程</a></li>\n<li><a href=\"#async-%E5%92%8C-defer-%E5%B1%9E%E6%80%A7%E5%B7%AE%E5%BC%82\">async 和 defer 属性差异</a></li>\n<li><a href=\"#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8\">如何使用</a></li>\n<li><a href=\"#domcontentloaded-%E4%B8%8E-load-%E7%9A%84%E5%8C%BA%E5%88%AB\">DOMContentLoaded 与 load 的区别</a></li>\n<li><a href=\"#%E5%8F%82%E8%80%83\">参考</a></li>\n</ul>\n<!-- tocstop -->\n<h2 id=\"script-标签加载过程\" style=\"position:relative;\"><a href=\"#script-%E6%A0%87%E7%AD%BE%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B\" aria-label=\"script 标签加载过程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>script 标签加载过程</h2>\n<p>这里简单提一下 <em>script</em> 标签加载过程，具体的细节要放在整个浏览器渲染过程中来讲解。</p>\n<p>我们知道，浏览器请求并解析一个页面的大致过程：</p>\n<ol>\n<li>解析 HTML 标签为 DOM 对象</li>\n<li>解析 CSS 标签为 CSSOM 对象</li>\n<li>由 DOM 和 CSSOM 合并产生渲染树</li>\n<li>有了渲染树，知道了所有节点的样式，下面便根据这些节点以及样式计算它们在浏览器中确切的大小和位置，这就是布局阶段</li>\n<li>绘制</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABOElEQVQY02M4efJkzekzp1+fP31+2ZU8DYNXT/LO3buVdeP1s4ITW48mSDOQCtauWZO0YcOGXevWrG9eW6Qre/JI/OJjh+LWnD4aP+94uo7Okb2HdVYc2G++98IFgzWWisyHN62XvHzlisW5c+fMDmzfJnJHiIHl5PHjhmfPnjU/f/68Ll7LZgvwiR6/cePeznPn/x+7dfvtBi0BybOb17ffvH37/+XLl/+f3bMz+4oIg9T5s2e+XLl69f/169dvM1y8eLHm6tWrl65dvNJ9tUBB7fXTgp33b2cdevO8YPOlOjO99sZO445ZM50aevssmRgYmGoqK2UbGxudGhoaHGqrqiRAFgP5Vi0tLY6tra2mDCtXrmhZs2bNw9UrVk/ZmiqrvG9n1LFtm8Mv7N0ZdWDK2jAJUoMQAKNHoCdhZ3OrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"9d8439c9.png\"\n        title=\"9d8439c9.png\"\n        src=\"/static/824dd5d402471deb51a5ace9b2733a47/af590/9d8439c9.png\"\n        srcset=\"/static/824dd5d402471deb51a5ace9b2733a47/63868/9d8439c9.png 250w,\n/static/824dd5d402471deb51a5ace9b2733a47/0b533/9d8439c9.png 500w,\n/static/824dd5d402471deb51a5ace9b2733a47/af590/9d8439c9.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>在这个过程中，我们需要知道 JavaScript 执行的两个细节：</p>\n<ol>\n<li>JavaScript 可以阻塞 DOM 的生成，</li>\n</ol>\n<p>也就是说当浏览器在解析 HTML 文档时，如果遇到 <code>&#x3C;script></code>，便会停下对 HTML 文档的解析，转而去处理脚本。如果脚本是内联的，浏览器会先去执行这段内联的脚本，如果是外链的，那么先会去加载脚本，然后执行。在处理完脚本之后，浏览器便继续解析 HTML 文档。</p>\n<p>当然，下文提及的 <em>async</em> 和 <em>defer</em> 会对这个过程有不同的影响。</p>\n<ol start=\"3\">\n<li>JavaScript 必须在 CSSOM 完成后才能执行</li>\n</ol>\n<p>因为 JavaScript 可以查询任意对象的样式，所以意味着在 CSS 解析完成后，JavaScript 才能操作。</p>\n<h2 id=\"async-和-defer-属性差异\" style=\"position:relative;\"><a href=\"#async-%E5%92%8C-defer-%E5%B1%9E%E6%80%A7%E5%B7%AE%E5%BC%82\" aria-label=\"async 和 defer 属性差异 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>async 和 defer 属性差异</h2>\n<p>在使用 <code>&#x3C;script></code> 的过程中，有两个属性是对脚本的加载顺序有着很大影响的：<em>async</em> 和 <em>defer</em>。</p>\n<p>让我们看这三种使用情况：</p>\n<ol>\n<li>不使用附加属性</li>\n</ol>\n<p><code>&#x3C;script src=\"script.js\">&#x3C;/script></code></p>\n<p>没有指定 <em>async</em> 和 <em>defer</em>，这种情况下浏览器会立即下载脚本并执行，这会打断 HTML parsing 过程。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABHUlEQVQoz5WSa0+DMBSG+///j5F4ySYLm+OD08SZxcRPS6RQCuVioIX2tYDgpluMTZ6cnmtPTw4pyw/keQEpFf5zjDEn7YRShiAIkaaiD2qadqJtj9Faf0lztihJRWaLZUgSAcY4OE9BaYQoiifbSOfrZFXVU8GfkDCMEdouWTQkxXHaFxsf4Vz0sr9bn0hzGG3OjoLwJMEhibBJmbDfktbd9BjdQNkZKyWhGoVW2xFY2zeDro0GWcVzrLk7ELvwszvMXlw4lxtcXT/CcTZYeE/Y7l7hv/nw2C1WbI7lAZ2+oDd4L/YgdVthpLK0kNgHAt6S436dYOkXeJg9I3AuwHZb1FCQNk7q+ohaV32n5Pc+nBhMU6OkFKos/1ynT3DaZQpKCztAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"f28a92f5.png\"\n        title=\"f28a92f5.png\"\n        src=\"/static/e569db7809485d6f326d446a296b8fbc/00d43/f28a92f5.png\"\n        srcset=\"/static/e569db7809485d6f326d446a296b8fbc/63868/f28a92f5.png 250w,\n/static/e569db7809485d6f326d446a296b8fbc/0b533/f28a92f5.png 500w,\n/static/e569db7809485d6f326d446a296b8fbc/00d43/f28a92f5.png 1000w,\n/static/e569db7809485d6f326d446a296b8fbc/aa440/f28a92f5.png 1500w,\n/static/e569db7809485d6f326d446a296b8fbc/e8950/f28a92f5.png 2000w,\n/static/e569db7809485d6f326d446a296b8fbc/de9fe/f28a92f5.png 2146w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<ol start=\"2\">\n<li>指定 <em>async</em></li>\n</ol>\n<p><code>&#x3C;script async src=\"script.js\">&#x3C;/script></code></p>\n<p>指定了 <em>async</em> 后，脚本的下载过程不会打断其他操作，只有在脚本执行阶段才会暂停 HTML parsing。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABBUlEQVQoz32R7U7CMBSGd/9XQWLiTaBBAgSYJMafJhpUxH0wBm23dXXdHrsR/KGTvnlymp5z0va8XlVVFIWmLEuHQeuSuq65tJqm+TfnSanYfHwShjFBEHV7Y0zXVDf1KboLrG2x2NrStGr68TKVI1JFLjWZKCiURhwUaSJ/EIeMPHe5XGN0dfH13jE/EoqASEYnVMQuizmULRGpDpFfe7QbSWE0yopepD1ibIm3Fs8skjGr/Yz7/bSLy92E6+Utg8mIwWzE1fiG1XzBw6PPPB7jJ5Ouxj+TTN35HYHa4tHO9zcWthvN+kXz9mpYP6W8D4fEvk9v/Zn2yw39+uOsM6bjkpwp36C8GTAsw7zyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8beb2095.png\"\n        title=\"8beb2095.png\"\n        src=\"/static/8f46ebc5c603c164d633eb3c8951057b/00d43/8beb2095.png\"\n        srcset=\"/static/8f46ebc5c603c164d633eb3c8951057b/63868/8beb2095.png 250w,\n/static/8f46ebc5c603c164d633eb3c8951057b/0b533/8beb2095.png 500w,\n/static/8f46ebc5c603c164d633eb3c8951057b/00d43/8beb2095.png 1000w,\n/static/8f46ebc5c603c164d633eb3c8951057b/aa440/8beb2095.png 1500w,\n/static/8f46ebc5c603c164d633eb3c8951057b/e8950/8beb2095.png 2000w,\n/static/8f46ebc5c603c164d633eb3c8951057b/3145a/8beb2095.png 2112w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<ol start=\"3\">\n<li>指定 <em>defer</em></li>\n</ol>\n<p>指定了 <em>defer</em> 后，脚本的下载和执行都不会暂停 HTML parsing。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABFklEQVQoz43RXU+DMBQGYP7/jzDxymsTr/TaZOqogc14oQynrIzPFuagOMprCyrVYPSQJ+e0OT0EajHG8SmKEjTNG/4TXddN7ltxnCLLcoVB10IISCnRtq1BGll+DZsaagUbijhJB3GCl4BiQ0NsoxjhNurRMOrXWppmkJ38xnyBtecCddmgKgTKfI9K1XVPAAfdpUgj/xJStsNAwmZwuQ2HzZUbLPgct9kcdmKDZETVRO3bWBQj3a8tC6J6ZsgPbPxkv3zAercalCsElYcL4uL4zMHJuYOjU4LL+yVo7cMvPNWj7Ib8rM545SOod4fMcVFzDmv6CpXW8Ee8Pq2RXF+hZgzW8FNH/bqfONLPz77u4zJ0NuMd0aBmAy3spssAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"23699fbf.png\"\n        title=\"23699fbf.png\"\n        src=\"/static/c44c3dfc407d17422ebdd8a947ffed43/00d43/23699fbf.png\"\n        srcset=\"/static/c44c3dfc407d17422ebdd8a947ffed43/63868/23699fbf.png 250w,\n/static/c44c3dfc407d17422ebdd8a947ffed43/0b533/23699fbf.png 500w,\n/static/c44c3dfc407d17422ebdd8a947ffed43/00d43/23699fbf.png 1000w,\n/static/c44c3dfc407d17422ebdd8a947ffed43/aa440/23699fbf.png 1500w,\n/static/c44c3dfc407d17422ebdd8a947ffed43/e8950/23699fbf.png 2000w,\n/static/c44c3dfc407d17422ebdd8a947ffed43/70c12/23699fbf.png 2110w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"如何使用\" style=\"position:relative;\"><a href=\"#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8\" aria-label=\"如何使用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>如何使用</h2>\n<p>至于在什么样的场景下使用这些属性，大概有这三条总结（见参考文章）：</p>\n<ul>\n<li>如果脚本是模块化的并且不依赖于任何脚本，则使用 <em>async</em>。</li>\n<li>如果该脚本有相互依赖的情况，则使用 <em>defer</em>。</li>\n<li>如果该脚本很小，并且有异步脚本所依赖，则请使用一个内联脚本，该脚本应在 <em>async</em> 脚本上方，并且不放置任何属性。</li>\n</ul>\n<p>在真实的浏览器环境下，由于异步网络情况，加载的脚本并不一定按照指定的顺序执行，对互相有依赖的脚本有一定风险。为了保证 HTML 渲染，<strong>最好的方式还是将 <em>script</em> 脚本放在 <em>body</em> 下面</strong>。</p>\n<p>以及 <em>async</em> 和 <em>defer</em> 都不能保证一定不会中断 HTML 渲染，所以得确保脚本内容在 <em>onLoad</em> 事件之后才开始运行。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!-- 其它的 html 内容 --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"domcontentloaded-与-load-的区别\" style=\"position:relative;\"><a href=\"#domcontentloaded-%E4%B8%8E-load-%E7%9A%84%E5%8C%BA%E5%88%AB\" aria-label=\"domcontentloaded 与 load 的区别 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DOMContentLoaded 与 load 的区别</h2>\n<p>script 标签对于页面加载的另一个影响在于 <em>DOMContentLoaded</em> 与 <em>load</em> 事件的时机。</p>\n<p>简单看图，了解一下什么是 <em>DOMContentLoaded</em> 与 <em>load</em>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAfUlEQVQI1x2OwQ6DIBQE/f/Pa9oj1WqRJ1IpaEmRmCn1MNnJXnYbdW9puwfbtnEcB4v3hBhJKSGT5XK9EeNKCAEjlvRJlG+l7Cf7XimFXDPnTNP3PcMw4JxjnmdGrTHGnK6rK6UQEay1Zy924SkePb0RF/HuhTcjax38n/oB4mKXAYOApeQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"a998458b.png\"\n        title=\"a998458b.png\"\n        src=\"/static/1f38b523fdb7be294f957fa0d41d2e76/00d43/a998458b.png\"\n        srcset=\"/static/1f38b523fdb7be294f957fa0d41d2e76/63868/a998458b.png 250w,\n/static/1f38b523fdb7be294f957fa0d41d2e76/0b533/a998458b.png 500w,\n/static/1f38b523fdb7be294f957fa0d41d2e76/00d43/a998458b.png 1000w,\n/static/1f38b523fdb7be294f957fa0d41d2e76/aa440/a998458b.png 1500w,\n/static/1f38b523fdb7be294f957fa0d41d2e76/d38ac/a998458b.png 1744w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>这两个事件有啥区别呢？点击这个<a href=\"https://testdrive-archive.azurewebsites.net/HTML5/DOMContentLoaded/Default.html\">网页</a>你就能明白。</p>\n<p>当 HTML 文档解析完成就会触发 <em>DOMContentLoaded</em>，而所有资源加载完成之后，<em>load</em> 事件才会被触发。</p>\n<ol>\n<li>defer 与 DOMContentLoaded</li>\n</ol>\n<p>如果 <em>script</em> 标签中包含 <em>defer</em>，那么这一块脚本将不会影响 HTML 文档的解析，而是等到 HTML 解析完成后才会执行。而 <em>DOMContentLoaded</em> 只有在 <em>defer</em> 脚本执行结束后才会被触发。 所以这意味着什么呢？HTML 文档解析不受影响，等 DOM 构建完成之后 <em>defer</em> 脚本执行，但脚本执行之前需要等待 CSSOM 构建完成。</p>\n<p>所以得出结论：<strong>在 DOM、CSSOM 构建完毕，<em>defer</em> 脚本执行完成之后，<em>DOMContentLoaded</em> 事件才会触发</strong>。</p>\n<ol start=\"2\">\n<li>async 与 DOMContentLoaded</li>\n</ol>\n<p>如果 <em>script</em> 标签中包含 <em>async</em>，则 HTML 文档构建不受影响，解析完毕后，<em>DOMContentLoaded</em> 触发，而不需要等待 <em>async</em> 脚本执行、样式表加载等等。</p>\n<p>另外需要提一下的是，我们在 jQuery 中经常使用的 <code>$(document).ready(function() { // ...代码... });</code> 其实监听的就是 <em>DOMContentLoaded</em> 事件，而 <code>$(document).load(function() { // ...代码... });</code> 监听的是 <em>load</em> 事件。</p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html#script-defer\">async vs defer attributes - Growing with the Web</a></li>\n<li><a href=\"https://juejin.im/post/5b2a508ae51d4558de5bd5d1\">再谈 load 与 DOMContentLoaded - 掘金</a></li>\n<li><a href=\"https://testdrive-archive.azurewebsites.net/HTML5/DOMContentLoaded/Default.html\">DOMContentLoaded</a></li>\n</ul>","fields":{"slug":"/content/WebFrontEnd-关于 Script 标签的加载知识/"},"frontmatter":{"title":"关于 Script 标签的加载知识","category":"WebFrontEnd","tags":"Web_Basic Script","date":"2020-07-16"}}},"pageContext":{"slug":"/content/WebFrontEnd-关于 Script 标签的加载知识/"}},"staticQueryHashes":["3649515864"]}